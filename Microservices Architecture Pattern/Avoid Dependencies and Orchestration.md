# از وابستگی ها و ارکستراسیون اجتناب کنید

یکی از چالش های اصلی الگوی معماری میکروسرویس ها، تعیین سطح صحیح دانه بندی برای اجزای سرویس است. اگر اجزای سرویس خیلی درشت هستند، ممکن است متوجه مزایای این الگوی معماری (استقرار، مقیاس پذیری، آزمایش پذیری، و اتصال شل) نشوید. با این حال، اجزای خدماتی که خیلی ریزدانه هستند منجر به الزامات ارکستراسیون خدمات می‌شوند، که به سرعت معماری میکروسرویس‌های ناب شما را به یک معماری سرویس‌گرای سنگین تبدیل می‌کند، که با تمام پیچیدگی، سردرگمی، هزینه‌ها و کرکی که معمولاً در برنامه‌های مبتنی بر SOA یافت می‌شود، کامل می‌شود.&#x20;

اگر متوجه شدید که باید اجزای خدمات خود را از آن هماهنگ کنید در رابط کاربری یا لایه API برنامه، به احتمال زیاد اجزای سرویس شما خیلی ریزدانه هستند. به طور مشابه، اگر متوجه می شوید که نیاز به برقراری ارتباط بین خدماتی دارید اجزای خدمات برای پردازش یک درخواست واحد، شانس شماست اجزای سرویس یا خیلی ریزدانه هستند یا از نظر عملکرد تجاری به درستی پارتیشن بندی نشده اند.

ارتباطات بین سرویسی، که می تواند اتصالات نامطلوب بین اجزا را وادار کند، می تواند در عوض از طریق یک پایگاه داده مشترک مدیریت شود. به عنوان مثال، اگر یک جزء خدماتی که سفارشات اینترنتی را تحویل می دهد به اطلاعات مشتری نیاز دارد، می تواند به پایگاه داده مراجعه کند بازیابی داده های لازم در مقابل عملکرد فراخوانی در بخش خدمات مشتری.

پایگاه داده مشترک می تواند نیازهای اطلاعاتی را برطرف کند، اما چه؟ عملکرد مشترک؟ اگر یک جزء سرویس به عملکرد نیاز دارد در یکی دیگر از مؤلفه‌های سرویس یا مشترک برای همه مؤلفه‌های سرویس وجود دارد، گاهی اوقات می‌توانید عملکرد مشترک را کپی کنید در سراسر اجزای سرویس (در نتیجه اصل DRY را نقض می کند: خودتان را تکرار نکنید). این یک عمل نسبتاً رایج در اکثر موارد است برنامه های کاربردی تجاری که معماری میکروسرویس ها را پیاده سازی می کنند الگو، مبادله کردن افزونگی از تکرار بخش های کوچک منطق تجاری به منظور مستقل نگه داشتن اجزای خدمات و جداسازی استقرار آنها. کلاس های کاربردی کوچک ممکن است در این دسته از کدهای تکراری قرار گیرند.

اگر متوجه می‌شوید که صرف‌نظر از سطح دانه‌بندی مؤلفه‌های سرویس، هنوز نمی‌توانید از هماهنگ‌سازی مؤلفه‌های سرویس اجتناب کنید، نشانه خوبی است که ممکن است این الگوی معماری مناسب برای برنامه شما نباشد. به دلیل ماهیت توزیع شده این الگو، حفظ یک واحد معاملاتی واحد بسیار دشوار است کار بر روی (و بین) اجزای خدمات. چنین عملی به نوعی چارچوب جبران تراکنش نیاز دارد برای بازگرداندن تراکنش ها، که پیچیدگی قابل توجهی به آن اضافه می کند این الگوی معماری نسبتا ساده و ظریف.
